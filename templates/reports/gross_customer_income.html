<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title> Gross Customer Income </title>
    </head>
    <body>
        {% extends "base.html" %}
        {% block content %}

        <h1> Gross Customer Income </h1>
        <a href={{ url_for('reports') }}>Back to all reports</a>
        <br><br>
        {% if not customerId %}
            <table class="thead-light">
                <thead>
                    <tr>
                        <th>No. </th>
                        <th>Customer Name</th>
                        <th>Date of First Sale or Repair</th>
                        <th>Date of Most Recent Sale or Repair</th>
                        <th>Number of Sales</th>
                        <th>Number of Repairs</th>
                        <th>Gross Income</th>
                    </tr>
                </thead>
                <tbody>
                    {% for customer in customers %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td><a href="{{ url_for('gross_customer_income') }}{{ customer[0] }}">{{ customer[1] }}</a></td>
                            <td>{{ customer[2] }}</td>
                            <td>{{ customer[3] }}</td>
                            <td>{{ customer[4] }}</td>
                            <td>{{ customer[5] }}</td>
                            <td>{{ customer[6] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
        <a href="{{ url_for('gross_customer_income') }}">Back to Previous</a>
        <h2>Sales</h2>
            <table>
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>VIN</th>
                        <th>Manufacturer</th>
                        <th>Model Name</th>
                        <th>Model Year</th>
                        <th>Sale Date</th>
                        <th>Sold Price</th>
                        <th>Salesperson</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sale in sales %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ sale[0] }}</td>
                            <td>{{ sale[1] }}</td>
                            <td>{{ sale[2] }}</td>
                            <td>{{ sale[3] }}</td>
                            <td>{{ sale[4] }}</td>
                            <td>{{ sale[5] }}</td>
                            <td>{{ sale[6] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        <h2>Repairs</h2>
            <table>
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>VIN</th>
                        <th>Odometer</th>
                        <th>Parts Cost</th>
                        <th>Labor Cost</th>
                        <th>Total Cost</th>
                        <th>Service Writer</th>
                    </tr>
                </thead>
                <tbody>
                    {% for repair in repairs %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ repair[0] }}</td>
                        <td>{{ repair[1] }}</td>
                        <td>{{ repair[2] }}</td>
                        <td>{{ repair[3] }}</td>
                        <td>{{ repair[4] }}</td>
                        <td>{{ repair[5] }}</td>
                        <td>{{ repair[6] }}</td>
                        <td>{{ repair[7] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
        {% endblock %}
    </body>
</html>